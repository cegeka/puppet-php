<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: apache::vhost</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )

  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">apache::vhost</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

<!-- if childs -->

    <div id="method-list">
      <h3 class="section-bar">Defines</h3>

      <div class="name-list">
      <a href="#M000358">ssl</a>&nbsp;&nbsp;
      </div>
    </div>


  </div>


    <!-- if includes -->

    <!-- if requires -->

    <!-- if realizes -->

    <div id="section">

<!-- if facts -->

<!-- if plugins -->

<!-- if nodes -->

<!-- if class -->







    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Defines</h3>

      <div id="method-M000358" class="method-detail">
        <a name="M000358"></a>

        <div class="method-heading">
          <span class="method-name">ssl</span><span class="method-args">( $cgibin =&gt; 'true', $readme =&gt; 'false', $accesslog_format =&gt; 'combined', $publish_csr =&gt; 'false', $certkey =&gt; 'false', $group =&gt; '', $sslonly =&gt; 'false', $certcn =&gt; 'false', $cert =&gt; 'false', $ports =&gt; ['&quot;*:80&quot;'], $days =&gt; '3650', $cacert =&gt; 'false', $mode =&gt; '2570', $admin =&gt; 'admin', $ensure =&gt; 'present', $sslports =&gt; ['&quot;*:443&quot;'], $certchain =&gt; 'false', $ip_address =&gt; '*', $config_content =&gt; 'false', $user =&gt; '', $htdocs =&gt; 'false', $cacrl =&gt; 'false', $aliases =&gt; [], $docroot =&gt; 'false', $conf =&gt; 'false', $config_file =&gt; '' )</span>
        </div>

        <div class="method-description">
          <h2>Definition: <a href="ssl.html">apache::vhost::ssl</a></h2>
<p>
Creates an SSL enabled virtualhost.
</p>
<p>
As it calls <a href="vhost.html">apache::vhost</a>, most of the parameters
are the same. A few additional parameters are used to configure the SSL
specific stuff.
</p>
<p>
An &quot;<a href="vhost.html#M000788">ssl</a>&quot; subdirectory will be
created in the virtualhost&#8216;s directory. By default, 3 files will be
created in this subdirectory using the generate-<a
href="vhost.html#M000788">ssl</a>-cert.sh script: $name.key (the private
key), $name.crt (the self-signed certificate) and $name.csr (the
certificate signing request). An additional file, ssleay.cnf, is used as a
template by generate-<a href="vhost.html#M000788">ssl</a>-cert.sh.
</p>
<p>
Parameters:
</p>
<ul>
<li>*$name*: the name of the virtualhost. Will be used as the CN in the
generated <a href="vhost.html#M000788">ssl</a> certificate.

</li>
<li>*$ensure*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$config_file*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$config_content*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$htdocs*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$conf*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$readme*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$docroot*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$cgibin*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$user*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$admin*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$group*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$mode*: see <a href="vhost.html">apache::vhost</a>

</li>
<li>*$aliases*: see <a href="vhost.html">apache::vhost</a>. The generated SSL
certificate will have this list as DNS subjectAltName entries.

</li>
<li>*$ip_address*: the ip address defined in the &lt;VirtualHost&gt; directive.
Defaults to &quot;*&quot;.

</li>
<li>*$cert*: optional source URL of the certificate (see examples below), if
the default self-signed generated one doesn&#8216;t suit. This the
certificate passed to the SSLCertificateFile directive.

</li>
<li>*$certkey*: optional source URL of the private key, if the default
generated one doesn&#8216;t suit. This the private key passed to the
SSLCertificateKeyFile directive.

</li>
<li>*$cacert*: optional source URL of the CA certificate, if the defaults
bundled with your distribution don&#8216;t suit. This the certificate
passed to the SSLCACertificateFile directive.

</li>
<li>*$cacrl*: optional source URL of the CA certificate revocation list. This
is the file passed to the SSLCARevocationFile directive.

</li>
<li>*$certchain*: optional source URL of the CA certificate chain, if needed.
This the certificate passed to the SSLCertificateChainFile directive.

</li>
<li>*$certcn*: set a custom CN field in your SSL certificate. Note that the CN
field must match the FQDN of your virtualhost to avoid &quot;certificate
name mismatch&quot; errors in the <a href="../users.html">users</a>
browsers. Defaults to false, which means that $name will be used as the CN.

</li>
<li>*$days*: validity of the key/cert generated by generate-<a
href="vhost.html#M000788">ssl</a>-cert.sh. Defaults to 10 years.

</li>
<li>*$publish_csr*: if set to &quot;true&quot;, the CSR will be copied in
htdocs/$name.csr. If set to a path, the CSR will be copied into the
specified file. Defaults to &quot;false&quot;, which means don&#8216;t copy
the CSR anywhere.

</li>
<li>*$sslonly*: if set to &quot;true&quot;, only the https virtualhost will be
configured. Defaults to &quot;false&quot;, which means the virtualhost will
be reachable unencrypted on port 80, as well as encrypted on port 443.

</li>
<li><b>ports</b>: array specifying the ports on which the non-SSL <a
href="vhost.html">vhost</a> will be reachable. Defaults to
&quot;*:80&quot;.

</li>
<li><b>sslports</b>: array specifying the ports on which the SSL <a
href="vhost.html">vhost</a> will be reachable. Defaults to
&quot;*:443&quot;.

</li>
<li><b>accesslog_format</b>: format string for access logs. Defaults to
&quot;combined&quot;.

</li>
<li>*gen-<a href="vhost.html#M000788">ssl</a>*: if set to &quot;true&quot;, the
generate-<a href="vhost.html#M000788">ssl</a>-cert.sh script will create a
new <a href="vhost.html#M000788">ssl</a> certificate for your <a
href="vhost.html">vhost</a>.

</li>
</ul>
<p>
Requires:
</p>
<ul>
<li>Class[&quot;<a href="../apache.html">apache</a>-<a
href="vhost.html#M000788">ssl</a>&quot;]

</li>
</ul>
<p>
Example usage:
</p>
<pre>
  $sslcert_country=&quot;US&quot;
  $sslcert_state=&quot;CA&quot;
  $sslcert_locality=&quot;San Francisco&quot;
  $sslcert_organisation=&quot;Snake Oil, Ltd.&quot;

  include apache::ssl

  apache::vhost::ssl { &quot;foo.example.com&quot;:
    ensure      =&gt; present,
    ip_address  =&gt; &quot;10.0.0.2&quot;,
    publish_csr =&gt; &quot;/home/webmaster/foo.example.com.csr&quot;,
    days=&quot;30&quot;,
  }

  # go to https://bar.example.com/bar.example.com.csr to retrieve the CSR.
  apache::vhost::ssl { &quot;bar.example.com&quot;:
    ensure      =&gt; present,
    ip_address  =&gt; &quot;10.0.0.3&quot;,
    cert        =&gt; &quot;puppet:///modules/exampleproject/ssl-certs/bar.example.com.crt&quot;,
    certchain   =&gt; &quot;puppet:///modules/exampleproject/ssl-certs/quovadis.chain.crt&quot;,
    publish_csr =&gt; true,
    sslonly     =&gt; true,
  }
</pre>
        </div>
      </div>


    </div>


    <!-- if resource_list -->



  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
